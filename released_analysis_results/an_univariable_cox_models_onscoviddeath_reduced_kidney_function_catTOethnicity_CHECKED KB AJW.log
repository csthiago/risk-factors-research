--------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  E:\analyses\opensafely-risk-factors-research-full\analysis\output/an_univariable_cox_models_onscoviddea
> th_reduced_kidney_function_catTOethnicity.log
  log type:  text
 opened on:   3 Jun 2020, 01:18:55

. 
. * Open dataset and fit specified model(s)
. use "cr_create_analysis_dataset_STSET_`outcome'.dta", clear
(Analysis dataset for the poor outcomes in Covid project)

. 
. 
. foreach var of any `varlist' {
  2. 
.         *Special cases
.         if "`var'"=="agesplsex" local model "age1 age2 age3 i.male"
  3.         else if "`var'"=="agegroupsex" local model "ib3.agegroup i.male"
  4.         else if "`var'"=="bmicat" local model "age1 age2 age3 i.male ib2.bmicat"
  5.         *General form of model
.         else local model "age1 age2 age3 i.`var'"
  6. 
.         *Fit and save model
.         cap erase ./output/models/an_univariable_cox_models_`outcome'_AGESEX_`var'.ster
  7.         capture stcox `model' , strata(stp) 
  8.         if _rc==0 {
  9.                 estimates
 10.                 estimates save ./output/models/an_univariable_cox_models_`outcome'_AGESEX_`var', replace
 11.                 }
 12.         else di "WARNING - `var' vs `outcome' MODEL DID NOT SUCCESSFULLY FIT"
 13. 
. }

--------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------

Stratified Cox regr. -- Breslow method for ties

No. of subjects =   17,277,935                  Number of obs    =  17,277,935
No. of failures =       10,926
Time at risk    =   1638907207
                                                LR chi2(5)       =    33680.86
Log likelihood  =   -130238.64                  Prob > chi2      =      0.0000

-----------------------------------------------------------------------------------------------
                           _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------------+----------------------------------------------------------------
                         age1 |   1.133499   .0230043     6.17   0.000     1.089296    1.179495
                         age2 |   1.001759   .0445943     0.04   0.969     .9180602    1.093088
                         age3 |    .953723   .0986688    -0.46   0.647     .7786816    1.168112
                              |
  reduced_kidney_function_cat |
Stage 3a/3b egfr 30-60        |   1.552673   .0351927    19.41   0.000     1.485206    1.623204
           Stage 4/5 egfr<30  |    3.59129   .1381554    33.23   0.000     3.330467    3.872539
-----------------------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/models/an_univariable_cox_models_onscoviddeath_AGESEX_reduced_kidney_function_cat.ster not foun
> d)
file ./output/models/an_univariable_cox_models_onscoviddeath_AGESEX_reduced_kidney_function_cat.ster saved

--------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------

Stratified Cox regr. -- Breslow method for ties

No. of subjects =   17,277,935                  Number of obs    =  17,277,935
No. of failures =       10,926
Time at risk    =   1638907207
                                                LR chi2(4)       =    33175.69
Log likelihood  =   -130491.23                  Prob > chi2      =      0.0000

------------------------------------------------------------------------------
          _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
        age1 |   1.147269   .0237979     6.62   0.000     1.101561    1.194873
        age2 |    .961029   .0435465    -0.88   0.380     .8793596    1.050283
        age3 |   1.087616   .1142779     0.80   0.424     .8851938    1.336328
  1.dialysis |   9.232993   .6729912    30.50   0.000     8.003844     10.6509
------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/models/an_univariable_cox_models_onscoviddeath_AGESEX_dialysis.ster not found)
file ./output/models/an_univariable_cox_models_onscoviddeath_AGESEX_dialysis.ster saved

--------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------

Stratified Cox regr. -- Breslow method for ties

No. of subjects =   17,277,935                  Number of obs    =  17,277,935
No. of failures =       10,926
Time at risk    =   1638907207
                                                LR chi2(4)       =    32774.26
Log likelihood  =   -130691.95                  Prob > chi2      =      0.0000

-----------------------------------------------------------------------------------------
                     _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------+----------------------------------------------------------------
                   age1 |   1.146456   .0237524     6.60   0.000     1.100835    1.193968
                   age2 |   .9633858   .0436102    -0.82   0.410     .8815935    1.052767
                   age3 |   1.080691   .1134495     0.74   0.460     .8797177    1.327576
1.chronic_liver_disease |   2.424241   .1819702    11.80   0.000     2.092581    2.808467
-----------------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/models/an_univariable_cox_models_onscoviddeath_AGESEX_chronic_liver_disease.ster not found)
file ./output/models/an_univariable_cox_models_onscoviddeath_AGESEX_chronic_liver_disease.ster saved

--------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------

Stratified Cox regr. -- Breslow method for ties

No. of subjects =   17,277,935                  Number of obs    =  17,277,935
No. of failures =       10,926
Time at risk    =   1638907207
                                                LR chi2(4)       =    33430.48
Log likelihood  =   -130363.84                  Prob > chi2      =      0.0000

-----------------------------------------------------------------------------------------------
                           _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------------+----------------------------------------------------------------
                         age1 |   1.161493   .0246563     7.05   0.000     1.114159    1.210838
                         age2 |   .9232441   .0426712    -1.73   0.084     .8432864    1.010783
                         age3 |   1.203338   .1287539     1.73   0.084     .9756886    1.484102
1.chronic_respiratory_disease |   2.029373   .0484558    29.64   0.000     1.936589    2.126602
-----------------------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/models/an_univariable_cox_models_onscoviddeath_AGESEX_chronic_respiratory_disease.ster not foun
> d)
file ./output/models/an_univariable_cox_models_onscoviddeath_AGESEX_chronic_respiratory_disease.ster saved

--------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------

Stratified Cox regr. -- Breslow method for ties

No. of subjects =   17,277,935                  Number of obs    =  17,277,935
No. of failures =       10,926
Time at risk    =   1638907207
                                                LR chi2(6)       =    33910.41
Log likelihood  =   -130123.87                  Prob > chi2      =      0.0000

---------------------------------------------------------------------------------------------
                         _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
----------------------------+----------------------------------------------------------------
                       age1 |   1.156843   .0243882     6.91   0.000     1.110017    1.205644
                       age2 |   .9244484   .0424843    -1.71   0.087     .8448206    1.011581
                       age3 |    1.20773   .1285784     1.77   0.076      .980276     1.48796
                            |
                    diabcat |
       Controlled diabetes  |   1.643501   .0398394    20.50   0.000     1.567243    1.723469
     Uncontrolled diabetes  |   2.757515   .0850571    32.88   0.000     2.595746    2.929366
Diabetes, no hba1c measure  |    2.28406    .112653    16.75   0.000       2.0736     2.51588
---------------------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/models/an_univariable_cox_models_onscoviddeath_AGESEX_diabcat.ster not found)
file ./output/models/an_univariable_cox_models_onscoviddeath_AGESEX_diabcat.ster saved

--------------------------------------------------------------------------------------------------------------------
active results
--------------------------------------------------------------------------------------------------------------------

Stratified Cox regr. -- Breslow method for ties

No. of subjects =   12,717,951                  Number of obs    =  12,717,951
No. of failures =        8,149
Time at risk    =   1206440035
                                                LR chi2(7)       =    24555.46
Log likelihood  =    -95217.63                  Prob > chi2      =      0.0000

-----------------------------------------------------------------------------------------
                     _t | Haz. Ratio   Std. Err.      z    P>|z|     [95% Conf. Interval]
------------------------+----------------------------------------------------------------
                   age1 |   1.149888   .0279084     5.75   0.000      1.09647     1.20591
                   age2 |    .956605   .0504891    -0.84   0.401     .8625944    1.060861
                   age3 |    1.10439   .1348595     0.81   0.416     .8693213    1.403022
                        |
              ethnicity |
                 Mixed  |   1.622026   .2084071     3.76   0.000     1.260929    2.086532
Asian or Asian British  |   1.723981   .0782066    12.01   0.000     1.577315    1.884284
                 Black  |   1.902885   .1273846     9.61   0.000     1.668901    2.169674
                 Other  |   1.373378   .1340201     3.25   0.001     1.134296    1.662854
-----------------------------------------------------------------------------------------
                                                             Stratified by stp
(note: file ./output/models/an_univariable_cox_models_onscoviddeath_AGESEX_ethnicity.ster not found)
file ./output/models/an_univariable_cox_models_onscoviddeath_AGESEX_ethnicity.ster saved

. 
. 
. * Close log file
. log close
      name:  <unnamed>
       log:  E:\analyses\opensafely-risk-factors-research-full\analysis\output/an_univariable_cox_models_onscoviddea
> th_reduced_kidney_function_catTOethnicity.log
  log type:  text
 closed on:   3 Jun 2020, 02:55:16
--------------------------------------------------------------------------------------------------------------------
